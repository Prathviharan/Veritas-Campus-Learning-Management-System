{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dell\\\\Desktop\\\\LMS\\\\Veritas-Campus-Learning-Management-System\\\\frontend\\\\src\\\\pages\\\\student\\\\StudentPrivateFiles.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './StudentPrivateFiles.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StudentPrivateFiles = () => {\n  _s();\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [dragActive, setDragActive] = useState(false);\n  const [uploadSuccess, setUploadSuccess] = useState('');\n  const [files, setFiles] = useState([]);\n  const studentId = 'BSC0123'; // replace with dynamic ID if needed\n\n  useEffect(() => {\n    fetchFiles();\n  }, []);\n  const fetchFiles = async () => {\n    try {\n      const res = await axios.get(`http://localhost:5000/api/student/files/${studentId}`);\n      setFiles(res.data);\n    } catch (err) {\n      console.error('Failed to fetch files:', err);\n    }\n  };\n  const handleFileChange = e => {\n    setSelectedFile(e.target.files[0]);\n  };\n  const handleDragOver = e => {\n    e.preventDefault();\n    setDragActive(true);\n  };\n  const handleDragLeave = () => {\n    setDragActive(false);\n  };\n  const handleDrop = e => {\n    e.preventDefault();\n    setDragActive(false);\n    setSelectedFile(e.dataTransfer.files[0]);\n  };\n  const handleUpload = async () => {\n    if (!selectedFile) return;\n    const formData = new FormData();\n    formData.append('file', selectedFile);\n    formData.append('studentId', studentId);\n    try {\n      await axios.post('http://localhost:5000/api/student/upload', formData);\n      setUploadSuccess('File uploaded successfully!');\n      setSelectedFile(null);\n      fetchFiles();\n      setTimeout(() => setUploadSuccess(''), 3000); // clear after 3 sec\n    } catch (err) {\n      console.error('Upload failed:', err);\n    }\n  };\n  const handleDelete = async id => {\n    try {\n      await axios.delete(`http://localhost:5000/api/student/files/${id}`);\n      fetchFiles();\n    } catch (err) {\n      console.error('Delete failed:', err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"private-files-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"My Private Files\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), uploadSuccess && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"success-msg\",\n      children: uploadSuccess\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 25\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `upload-area ${dragActive ? 'active' : ''}`,\n      onDragOver: handleDragOver,\n      onDragLeave: handleDragLeave,\n      onDrop: handleDrop,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Drag & Drop your file here\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: handleFileChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleUpload,\n        children: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"uploaded-files\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Uploaded Files\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), files.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No files uploaded yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: files.map(file => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            href: `http://localhost:5000/${file.filePath}`,\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            children: file.originalName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDelete(file._id),\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 17\n          }, this)]\n        }, file._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n};\n_s(StudentPrivateFiles, \"w4VcKhExKlUkVkNBhLvwUFy12wc=\");\n_c = StudentPrivateFiles;\nexport default StudentPrivateFiles;\nvar _c;\n$RefreshReg$(_c, \"StudentPrivateFiles\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","StudentPrivateFiles","_s","selectedFile","setSelectedFile","dragActive","setDragActive","uploadSuccess","setUploadSuccess","files","setFiles","studentId","fetchFiles","res","get","data","err","console","error","handleFileChange","e","target","handleDragOver","preventDefault","handleDragLeave","handleDrop","dataTransfer","handleUpload","formData","FormData","append","post","setTimeout","handleDelete","id","delete","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onDragOver","onDragLeave","onDrop","type","onChange","onClick","length","map","file","href","filePath","rel","originalName","_id","_c","$RefreshReg$"],"sources":["C:/Users/Dell/Desktop/LMS/Veritas-Campus-Learning-Management-System/frontend/src/pages/student/StudentPrivateFiles.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport './StudentPrivateFiles.css';\r\n\r\nconst StudentPrivateFiles = () => {\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n  const [dragActive, setDragActive] = useState(false);\r\n  const [uploadSuccess, setUploadSuccess] = useState('');\r\n  const [files, setFiles] = useState([]);\r\n\r\n  const studentId = 'BSC0123'; // replace with dynamic ID if needed\r\n\r\n  useEffect(() => {\r\n    fetchFiles();\r\n  }, []);\r\n\r\n  const fetchFiles = async () => {\r\n    try {\r\n      const res = await axios.get(`http://localhost:5000/api/student/files/${studentId}`);\r\n      setFiles(res.data);\r\n    } catch (err) {\r\n      console.error('Failed to fetch files:', err);\r\n    }\r\n  };\r\n\r\n  const handleFileChange = (e) => {\r\n    setSelectedFile(e.target.files[0]);\r\n  };\r\n\r\n  const handleDragOver = (e) => {\r\n    e.preventDefault();\r\n    setDragActive(true);\r\n  };\r\n\r\n  const handleDragLeave = () => {\r\n    setDragActive(false);\r\n  };\r\n\r\n  const handleDrop = (e) => {\r\n    e.preventDefault();\r\n    setDragActive(false);\r\n    setSelectedFile(e.dataTransfer.files[0]);\r\n  };\r\n\r\n  const handleUpload = async () => {\r\n    if (!selectedFile) return;\r\n    const formData = new FormData();\r\n    formData.append('file', selectedFile);\r\n    formData.append('studentId', studentId);\r\n\r\n    try {\r\n      await axios.post('http://localhost:5000/api/student/upload', formData);\r\n      setUploadSuccess('File uploaded successfully!');\r\n      setSelectedFile(null);\r\n      fetchFiles();\r\n      setTimeout(() => setUploadSuccess(''), 3000); // clear after 3 sec\r\n    } catch (err) {\r\n      console.error('Upload failed:', err);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      await axios.delete(`http://localhost:5000/api/student/files/${id}`);\r\n      fetchFiles();\r\n    } catch (err) {\r\n      console.error('Delete failed:', err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"private-files-page\">\r\n      <h2>My Private Files</h2>\r\n      {uploadSuccess && <p className=\"success-msg\">{uploadSuccess}</p>}\r\n\r\n      <div\r\n        className={`upload-area ${dragActive ? 'active' : ''}`}\r\n        onDragOver={handleDragOver}\r\n        onDragLeave={handleDragLeave}\r\n        onDrop={handleDrop}\r\n      >\r\n        <p>Drag & Drop your file here</p>\r\n        <input type=\"file\" onChange={handleFileChange} />\r\n        <button onClick={handleUpload}>Upload</button>\r\n      </div>\r\n\r\n      <div className=\"uploaded-files\">\r\n        <h3>Uploaded Files</h3>\r\n        {files.length === 0 ? (\r\n          <p>No files uploaded yet.</p>\r\n        ) : (\r\n          <ul>\r\n            {files.map((file) => (\r\n              <li key={file._id}>\r\n                <a href={`http://localhost:5000/${file.filePath}`} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                  {file.originalName}\r\n                </a>\r\n                <button onClick={() => handleDelete(file._id)}>Delete</button>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StudentPrivateFiles;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}