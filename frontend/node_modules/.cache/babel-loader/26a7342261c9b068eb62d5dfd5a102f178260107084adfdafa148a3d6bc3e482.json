{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dell\\\\Desktop\\\\LMS\\\\Veritas-Campus-Learning-Management-System\\\\frontend\\\\src\\\\pages\\\\student\\\\StudentPrivateFiles.js\",\n  _s = $RefreshSig$();\n// StudentPrivateFiles.js\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './StudentPrivateFiles.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StudentPrivateFiles = () => {\n  _s();\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [studentId, setStudentId] = useState('student123'); // Replace this dynamically if needed\n  const [message, setMessage] = useState('');\n  const [uploadedFiles, setUploadedFiles] = useState([]);\n  useEffect(() => {\n    fetchFiles();\n  }, []);\n  const fetchFiles = async () => {\n    try {\n      const response = await axios.get(`http://localhost:5000/api/student/files/${studentId}`);\n      setUploadedFiles(response.data);\n    } catch (error) {\n      console.error('Error fetching files:', error);\n    }\n  };\n  const handleFileChange = e => {\n    setSelectedFile(e.target.files[0]);\n  };\n  const handleDrop = e => {\n    e.preventDefault();\n    setSelectedFile(e.dataTransfer.files[0]);\n  };\n  const handleDragOver = e => {\n    e.preventDefault();\n  };\n  const handleUpload = async () => {\n    if (!selectedFile) return alert(\"Please select a file.\");\n    const formData = new FormData();\n    formData.append('file', selectedFile);\n    formData.append('studentId', studentId);\n    try {\n      const res = await axios.post('http://localhost:5000/api/student/upload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      setMessage('File uploaded successfully!');\n      setSelectedFile(null);\n      fetchFiles();\n    } catch (error) {\n      console.error('Upload failed:', error);\n      setMessage('Upload failed.');\n    }\n  };\n  const handleDelete = async fileId => {\n    try {\n      await axios.delete(`http://localhost:5000/api/student/files/${fileId}`);\n      fetchFiles();\n    } catch (error) {\n      console.error('Delete failed:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"student-private-files\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Upload Private Files\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"drop-zone\",\n      onDrop: handleDrop,\n      onDragOver: handleDragOver,\n      children: [selectedFile ? selectedFile.name : 'Drag & drop a file or click to select', /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: handleFileChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"upload-button\",\n      onClick: handleUpload,\n      children: \"Upload\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"message\",\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"uploaded-files\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Uploaded Files\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), uploadedFiles.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No files uploaded yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: uploadedFiles.map(file => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            href: `http://localhost:5000/${file.filePath}`,\n            target: \"_blank\",\n            rel: \"noreferrer\",\n            children: file.originalName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDelete(file._id),\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 17\n          }, this)]\n        }, file._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n_s(StudentPrivateFiles, \"imxyEo31+wUhhpl9kSs2wXUKvXA=\");\n_c = StudentPrivateFiles;\nexport default StudentPrivateFiles;\nvar _c;\n$RefreshReg$(_c, \"StudentPrivateFiles\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","StudentPrivateFiles","_s","selectedFile","setSelectedFile","studentId","setStudentId","message","setMessage","uploadedFiles","setUploadedFiles","fetchFiles","response","get","data","error","console","handleFileChange","e","target","files","handleDrop","preventDefault","dataTransfer","handleDragOver","handleUpload","alert","formData","FormData","append","res","post","headers","handleDelete","fileId","delete","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onDrop","onDragOver","name","type","onChange","onClick","length","map","file","href","filePath","rel","originalName","_id","_c","$RefreshReg$"],"sources":["C:/Users/Dell/Desktop/LMS/Veritas-Campus-Learning-Management-System/frontend/src/pages/student/StudentPrivateFiles.js"],"sourcesContent":["// StudentPrivateFiles.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport './StudentPrivateFiles.css';\r\n\r\nconst StudentPrivateFiles = () => {\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n  const [studentId, setStudentId] = useState('student123'); // Replace this dynamically if needed\r\n  const [message, setMessage] = useState('');\r\n  const [uploadedFiles, setUploadedFiles] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchFiles();\r\n  }, []);\r\n\r\n  const fetchFiles = async () => {\r\n    try {\r\n      const response = await axios.get(`http://localhost:5000/api/student/files/${studentId}`);\r\n      setUploadedFiles(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching files:', error);\r\n    }\r\n  };\r\n\r\n  const handleFileChange = (e) => {\r\n    setSelectedFile(e.target.files[0]);\r\n  };\r\n\r\n  const handleDrop = (e) => {\r\n    e.preventDefault();\r\n    setSelectedFile(e.dataTransfer.files[0]);\r\n  };\r\n\r\n  const handleDragOver = (e) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  const handleUpload = async () => {\r\n    if (!selectedFile) return alert(\"Please select a file.\");\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', selectedFile);\r\n    formData.append('studentId', studentId);\r\n\r\n    try {\r\n      const res = await axios.post('http://localhost:5000/api/student/upload', formData, {\r\n        headers: { 'Content-Type': 'multipart/form-data' }\r\n      });\r\n\r\n      setMessage('File uploaded successfully!');\r\n      setSelectedFile(null);\r\n      fetchFiles();\r\n    } catch (error) {\r\n      console.error('Upload failed:', error);\r\n      setMessage('Upload failed.');\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (fileId) => {\r\n    try {\r\n      await axios.delete(`http://localhost:5000/api/student/files/${fileId}`);\r\n      fetchFiles();\r\n    } catch (error) {\r\n      console.error('Delete failed:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"student-private-files\">\r\n      <h2>Upload Private Files</h2>\r\n\r\n      <div\r\n        className=\"drop-zone\"\r\n        onDrop={handleDrop}\r\n        onDragOver={handleDragOver}\r\n      >\r\n        {selectedFile ? selectedFile.name : 'Drag & drop a file or click to select'}\r\n        <input type=\"file\" onChange={handleFileChange} />\r\n      </div>\r\n\r\n      <button className=\"upload-button\" onClick={handleUpload}>Upload</button>\r\n      {message && <p className=\"message\">{message}</p>}\r\n\r\n      <div className=\"uploaded-files\">\r\n        <h3>Uploaded Files</h3>\r\n        {uploadedFiles.length === 0 ? (\r\n          <p>No files uploaded yet.</p>\r\n        ) : (\r\n          <ul>\r\n            {uploadedFiles.map(file => (\r\n              <li key={file._id}>\r\n                <a href={`http://localhost:5000/${file.filePath}`} target=\"_blank\" rel=\"noreferrer\">\r\n                  {file.originalName}\r\n                </a>\r\n                <button onClick={() => handleDelete(file._id)}>Delete</button>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StudentPrivateFiles;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}